# ISSUES

Problems found after testing. Add new issues at the top.

---

## AIBlocks → TREF Naming Refactor (IN PROGRESS)

**Date**: 2026-01-07
**Priority**: Medium
**Scope**: Project-wide

Old "AIBlocks" naming found in 26+ files across source code, documentation, and website.

### Completed (Documentation only):
- [x] doc/style/format.md - TREF Format Specification
- [x] doc/tref/publisher.md - TREF Publisher
- [x] doc/tref/mcp-report.md - TREF MCP report
- [x] doc/license-model.md - TREF License Model
- [x] docs/index.html - GitHub links
- [x] docs/guide.html - GitHub links
- [x] docs/builder.html - GitHub links
- [x] docs/examples.html - GitHub links
- [x] docs/about-cli.html - GitHub links
- [x] .env.example - Comment header
- [x] RULES - Project description
- [x] RAG - Project description

### Remaining (Source Code - awaiting approval):
- [ ] src/index.js
- [ ] src/tref.manifest.json
- [ ] src/tref.schema.json
- [ ] src/publisher/publish.js (AIBlock typedef)
- [ ] src/publisher/io.js (AIBlock typedef)
- [ ] src/publisher/publish.test.js
- [ ] src/publisher/id.test.js
- [ ] src/mcp/server.js

### Completed (Docs site):
- [x] docs/js/wrapper.js - removed (now uses CDN)
- [x] docs/js/browser.js - refactored to import from npm

### Decisions still needed:
1. License identifier: `AIBlocks-1.0` → `TREF-1.0`?
2. Schema URL: New domain or placeholder?
3. Historical files (DONE, CHANGELOG, PHASES): Update or preserve?

## Dark Mode Issues (PARTIALLY FIXED)

**Date**: 2026-01-07
**Status**: Partially fixed

- [x] Text areas staying white - Fixed with CSS custom properties
- [ ] Flash of light theme when navigating between pages - Still present

**Root cause of flash**: Theme is set via JavaScript after page load.
**Possible fix**: Inline script in `<head>` to set `html.dark` before render, or use CSS `color-scheme` meta tag.

---

## GitHub Pages Build Issues (RESOLVED)

**Date**: 2026-01-07
**Status**: Resolved

Issues encountered when setting up auto TREF block generation:

1. **`.tref` extension not served** → Use `.json` instead
2. **Jekyll processing markdown** → Move `content/` outside `docs/`, add `.nojekyll`
3. **npm 2FA token** → Create granular token without 2FA requirement
4. **npm package 138MB** → Exclude binaries in `files` array (now 16KB)
5. **CDN 404** → `dist/` was in `.gitignore`, needed to publish to npm first
6. **Embed code relative path** → Changed `./js/wrapper.js` to CDN URL

See `doc/auto-tref-blocks.md` for troubleshooting guide.

---
