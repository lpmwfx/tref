<!DOCTYPE html>
<html>
<head>
  <title>TREF Test</title>
</head>
<body>
  <h1>TREF Hover Menu Test</h1>
  <div id="test-block"></div>
  
  <script type="module">
    import { TrefWrapper, publish, getStyles } from '/docs/js/browser.js';
    
    // Log what we got
    console.log('TrefWrapper:', typeof TrefWrapper);
    console.log('publish:', typeof publish);
    console.log('getStyles:', typeof getStyles);
    
    // Inject styles
    const style = document.createElement('style');
    const css = getStyles();
    console.log('CSS length:', css.length);
    console.log('Has tref-actions:', css.includes('.tref-actions'));
    style.textContent = css;
    document.head.appendChild(style);
    
    // Create block
    const block = await publish('Test content for hover menu');
    console.log('Block created:', block.id);
    
    // Render
    const wrapper = new TrefWrapper(block);
    const html = wrapper.toHTML();
    console.log('HTML has tref-actions:', html.includes('tref-actions'));
    document.getElementById('test-block').innerHTML = html;
    wrapper.attachEvents(document.querySelector('.tref-wrapper'));
    
    console.log('Done!');
  </script>
</body>
</html>
