# CHANGELOG

Finished changes for TREF project.

## [0.1.0] - 2026-01-07

### Added
- Single-source architecture: src/ → dist/ → CDN/npm
- npm run build:browser bundles wrapper.js to dist/tref-block.js (10kb)
- Package exports for ESM and CJS
- CDN support via jsdelivr/unpkg

### Changed
- Renamed package from aiblocks to tref-block
- Renamed AIBlock typedef to TrefBlock
- Demo imports from dist/ instead of src/

### UI/UX
- Hover menu as dropdown overlay (not inline)
- SVG icons for all action buttons (copy, JSON, download)
- Proper JSON icon with curly braces
- Accessibility: ARIA roles, keyboard navigation, focus-visible
- Touch support: tap-to-toggle, long-press (500ms) for drag
- Compact receiver mode (32x32)
- Mobile: larger hit areas via @media (pointer: coarse)

### Documentation
- doc/project.md: Single-source architecture section
- doc/TrefBlockUIUX.md: Complete UI/UX specification
- CLAUDE.md: Build workflow and architecture
- README.md: Install instructions, architecture diagram

---

## [Unreleased]

### Added
- TrefWrapper dropdown menu with Copy Content, Copy JSON, Download actions
- Documentation site (tref.lpmwfx.com)
  - index.html: Homepage with promo TREF block
  - builder.html: No-code block builder with embed code copy button
  - guide.html: Developer guide (CLI, JS API, MCP) with article TREF block
  - about-cli.html: Simple explanation of tref and tref-mcp tools
  - examples.html: Examples overview page
  - examples/drag-drop.html: Drag & drop demo with mini receivers
  - examples/ai-chat.html: Side-by-side chat comparison (with/without TREF)
- ES modules in docs/js/ (wrapper.js, browser.js)
- Navigation with About link on all pages
- TREF blocks for articles (guide, about) with dynamic URLs

- Phase 1 complete: Block Format Specification v1.0
- Format name: **AIBlocks - Traceable Knowledge Format**
- Complete format specification (doc/format.md)
- License-as-format philosophy (doc/license.md)
- Publisher two-outputs model (doc/publisher.md)
- Security section: format is safe by construction (no executable code)
- Block schema: v, id, content, meta, origin, refs, parent
- Reference types: url, archive, search, hash
- ID format: sha256:<64 hex chars> (content-based)
- Canonical JSON spec for deterministic ID generation
- Zod schemas with JSDoc types
- 26 tests passing

### Changed
- Simplified schema: removed type, version, childIds (not needed for v1.0)
- Renamed fields: createdAt → created, updatedAt → modified
- Renamed fields: parentId → parent
- Consistent naming: AI-Blocks → AIBlocks (no hyphen)

### Technical
- TypeScript-level safety in pure JavaScript
- JSDoc type annotations throughout
- ESLint with typescript-eslint type-aware rules
- Prettier formatting configuration
- VS Code settings for editor integration
